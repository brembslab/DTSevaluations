q()
install.packages(c("adehabitat","XML","lattice","hexbin",
"colorRamps" ,"corrplot","gplots", "rgl", "MASS", "adehabitatLT","corrplot"), dependencies=TRUE)
q()
load("F:/PV-Anlage/.RData")
flyData <- xmlParse(file.choose())
require("XML")
require("data.table")
install.packages(XML)
install.packages("XML")
install.packages("data.table")
library("XML")
flyData <- xmlParse(file.choose())
project.file <- file.choose()
devtools::install_github("ACCLAB/dabestr")
install.packages(devtools)
install.packages("devtools")
devtools::install_github("ACCLAB/dabestr")
devtools::install_github("ACCLAB/dabestr")
install.packages("dabestr")
install.packages(c("assertthat", "backports", "BayesFactor", "BH", "bit", "cli", "cluster", "coda", "colorspace", "cowplot", "DBI", "digest", "dplyr", "dygraphs", "effsize", "evaluate", "ggplot2", "ggpubr", "ggsignif", "glue", "gtable", "gtools", "highr", "htmlwidgets", "jsonlite", "knitr", "lazyeval", "lubridate", "markdown", "MASS", "Matrix", "mgcv", "mime", "munsell", "mvtnorm", "nlme", "pbapply", "pillar", "pkgconfig", "purrr", "R6", "Rcpp", "RcppEigen", "RCurl", "rlang", "rmarkdown", "rpart", "RSQLite", "scales", "seewave", "stringi", "stringr", "survival", "tibble", "tidyr", "tidyselect", "tuneR", "utf8", "XML", "xtable", "xts", "yaml", "zoo"))
install.packages(c("nlme", "rpart"))
install.packages(c("nlme", "rpart"))
devtools::install_github("ACCLAB/dabestr")
install.packages("processx")
devtools::install_github("ACCLAB/dabestr")
install.packages("ps")
devtools::install_github("ACCLAB/dabestr")
install.packages("pkgload")
install.packages("dabestr")
devtools::install_github("ACCLAB/dabestr")
install.packages("fs")
devtools::install_github("ACCLAB/dabestr")
install.packages("plyr")
devtools::install_github("ACCLAB/dabestr")
install.packages("datasets")
install.packages("datasets")
install.packages("datasets")
install.packages("datasets")
install.packages("datasets")
install.packages("datasets")
devtools::install_github("ACCLAB/dabestr")
load("D:/data/course_tlearn/evaluations/.RData")
View(rawdata)
View(rawdata)
View(rawdata)
rawdata$a_pos = rawdata$a_pos-1800
View(rawdata)
View(rawdata)
View(rawdata)
View(experiment)
binsize = as.integer(experiment$sample_rate/20)
real_sample_rate = nrow(rawdata)/(rawdata$time[nrow(rawdata)]/1000)
experiment$sample_rate = real_sample_rate/binsize
View(experiment)
seq(1,length(rawdata$time),binsize)
abs(max(rawdata$period[1002:1005]) - min(rawdata$period[1002:1005]))
abs(max(rawdata$period[1000:2000]) - min(rawdata$period[1000:2000]))
abs(max(rawdata$period[5000:7000]) - min(rawdata$period[5000:7000]))
dumydata = rawdata$period[5000:7000]
table(dummydata)
table(dumydata)
dumydata$1
view(dumydata)
View(dumydata)
ntestnumber=table(dumydata)$1
testnumber=table(dumydata)[1,1]
testnumber=table(dumydata)[1,1]
testtable<-table(dumydata)
testtable
testtable$1
testtable[1.1]
testtable[1.1]>testtable[1.2]
testtable[1.2]
testtable[1.1]
testtable[2.1]
testtable[2]
testtable[1]
testtable[1]>testtable[2]
testtable[2]>testtable[1]
table(dumydata)[1]>table(dumydata)[2]
table(dumydata)[2]>table(dumydata)[1]
View(experiment)
# create the vectors in which to save the downsampled data
timeDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$time)/binsize))
a_posDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$a_pos)/binsize))
torqueDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$torque)/binsize))
periodDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$period)/binsize))
# downsampling time
for (index in seq(1,length(rawdata$time),binsize)) {
if(index < (length(rawdata$time)-binsize)) { # check whether we reached the end of the data; if not:
timeDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$time[index:(index+binsize-1)])/binsize)  # average all data in the bin and save it in the right slot of the downsampled vector
} else {  # in case we reached the end
timeDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$time[index:length(rawdata$time)])/length(rawdata$time[index:length(rawdata$time)])) # average over the remaining values and save the result
}
}
# downsampling position
for (index in seq(1,length(rawdata$a_pos),binsize)) {
if(index < (length(rawdata$a_pos)-binsize)) { # check whether we reached the end of the data; if not:
a_posDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$a_pos[index:(index+binsize-1)])/binsize)  # average all data in the bin and save it in the right slot of the downsampled vector
} else {  # in case we reached the end
a_posDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$a_pos[index:length(rawdata$a_pos)])/length(rawdata$a_pos[index:length(rawdata$a_pos)])) # average over the remaining values and save the result
}
}
# downsampling torque
for (index in seq(1,length(rawdata$torque),binsize)) {
if(index < (length(rawdata$torque)-binsize)) { # check whether we reached the end of the data; if not:
torqueDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$torque[index:(index+binsize-1)])/binsize)  # average all data in the bin and save it in the right slot of the downsampled vector
} else {  # in case we reached the end
torqueDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$torque[index:length(rawdata$torque)])/length(rawdata$torque[index:length(rawdata$torque)])) # average over the remaining values and save the result
}
}
# downsampling period
for (index in seq(1,length(rawdata$period),binsize)) {
if (abs(max(rawdata$period[index:(index+binsize-1)]) - min(rawdata$period[index:(index+binsize-1)])) = 0){ #check if there is a period switch in the bin, if there is:
periodDownsampled[((index-1)/binsize)+1] <- rawdata$period[index]
}
else #if there are two different period values in the bin
{
if (table(rawdata$period[index:(index+binsize-1)])[1]>table(rawdata$period[index:(index+binsize-1)])[2]) #if the majority of values indicates old period
{
periodDownsampled[((index-1)/binsize)+1] <- rawdata$period[index] #make the period vale that of the old period
}
else {periodDownsampled[((index-1)/binsize)+1] <- rawdata$period[index+binsize-1] #if the majority of values indicates new period, set the value to the new period
}
}
}
# bind the downsampled vectors into one dataframe
rawdataDown <- data.frame("time" = timeDownsampled, "a_pos" = a_posDownsampled, "torque" = torqueDownsampled, "period" = periodDownsampled)
# create the vectors in which to save the downsampled data
timeDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$time)/binsize))
a_posDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$a_pos)/binsize))
torqueDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$torque)/binsize))
periodDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$period)/binsize))
# downsampling time
for (index in seq(1,length(rawdata$time),binsize)) {
if(index < (length(rawdata$time)-binsize)) { # check whether we reached the end of the data; if not:
timeDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$time[index:(index+binsize-1)])/binsize)  # average all data in the bin and save it in the right slot of the downsampled vector
} else {  # in case we reached the end
timeDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$time[index:length(rawdata$time)])/length(rawdata$time[index:length(rawdata$time)])) # average over the remaining values and save the result
}
}
# downsampling position
for (index in seq(1,length(rawdata$a_pos),binsize)) {
if(index < (length(rawdata$a_pos)-binsize)) { # check whether we reached the end of the data; if not:
a_posDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$a_pos[index:(index+binsize-1)])/binsize)  # average all data in the bin and save it in the right slot of the downsampled vector
} else {  # in case we reached the end
a_posDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$a_pos[index:length(rawdata$a_pos)])/length(rawdata$a_pos[index:length(rawdata$a_pos)])) # average over the remaining values and save the result
}
}
# downsampling torque
for (index in seq(1,length(rawdata$torque),binsize)) {
if(index < (length(rawdata$torque)-binsize)) { # check whether we reached the end of the data; if not:
torqueDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$torque[index:(index+binsize-1)])/binsize)  # average all data in the bin and save it in the right slot of the downsampled vector
} else {  # in case we reached the end
torqueDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$torque[index:length(rawdata$torque)])/length(rawdata$torque[index:length(rawdata$torque)])) # average over the remaining values and save the result
}
}
# downsampling period
for (index in seq(1,length(rawdata$period),binsize)) {
if (abs(max(rawdata$period[index:(index+binsize-1)]) - min(rawdata$period[index:(index+binsize-1)])) == 0){ #check if there is a period switch in the bin, if there is:
periodDownsampled[((index-1)/binsize)+1] <- rawdata$period[index]
} else { #if, instead, there are two different period values in the bin...
if (table(rawdata$period[index:(index+binsize-1)])[1]>table(rawdata$period[index:(index+binsize-1)])[2]) #if the majority of values indicates old period
{
periodDownsampled[((index-1)/binsize)+1] <- rawdata$period[index] #make the period vale that of the old period
} else {
periodDownsampled[((index-1)/binsize)+1] <- rawdata$period[index+binsize-1] #if the majority of values indicates new period, set the value to the new period
}
}
}
# bind the downsampled vectors into one dataframe
rawdataDown <- data.frame("time" = timeDownsampled, "a_pos" = a_posDownsampled, "torque" = torqueDownsampled, "period" = periodDownsampled)
View(rawdataDown)
View(rawdataDown)
# create the vectors in which to save the downsampled data
timeDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$time)/binsize))
a_posDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$a_pos)/binsize))
torqueDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$torque)/binsize))
periodDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$period)/binsize))
# downsampling time
for (index in seq(1,length(rawdata$time),binsize)) {
if(index < (length(rawdata$time)-binsize)) { # check whether we reached the end of the data; if not:
timeDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$time[index:(index+binsize-1)])/binsize)  # average all data in the bin and save it in the right slot of the downsampled vector
} else {  # in case we reached the end
timeDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$time[index:length(rawdata$time)])/length(rawdata$time[index:length(rawdata$time)])) # average over the remaining values and save the result
}
}
# downsampling position
for (index in seq(1,length(rawdata$a_pos),binsize)) {
if(index < (length(rawdata$a_pos)-binsize)) { # check whether we reached the end of the data; if not:
a_posDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$a_pos[index:(index+binsize-1)])/binsize)  # average all data in the bin and save it in the right slot of the downsampled vector
} else {  # in case we reached the end
a_posDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$a_pos[index:length(rawdata$a_pos)])/length(rawdata$a_pos[index:length(rawdata$a_pos)])) # average over the remaining values and save the result
}
}
# downsampling torque
for (index in seq(1,length(rawdata$torque),binsize)) {
if(index < (length(rawdata$torque)-binsize)) { # check whether we reached the end of the data; if not:
torqueDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$torque[index:(index+binsize-1)])/binsize)  # average all data in the bin and save it in the right slot of the downsampled vector
} else {  # in case we reached the end
torqueDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$torque[index:length(rawdata$torque)])/length(rawdata$torque[index:length(rawdata$torque)])) # average over the remaining values and save the result
}
}
# downsampling period
for (index in seq(1,length(rawdata$period),binsize)) {
if (abs(max(rawdata$period[index:(index+binsize-1)]) - min(rawdata$period[index:(index+binsize-1)])) == 0){ #check if there is a period switch in the bin, if there is:
periodDownsampled[((index-1)/binsize)+1] <- rawdata$period[index]
} else if (table(rawdata$period[index:(index+binsize-1)])[1]>table(rawdata$period[index:(index+binsize-1)])[2]) #if the majority of values indicates old period
{
periodDownsampled[((index-1)/binsize)+1] <- rawdata$period[index] #make the period vale that of the old period
} else {
periodDownsampled[((index-1)/binsize)+1] <- rawdata$period[index+binsize-1] #if the majority of values indicates new period, set the value to the new period
}
}
# bind the downsampled vectors into one dataframe
rawdataDown <- data.frame("time" = timeDownsampled, "a_pos" = a_posDownsampled, "torque" = torqueDownsampled, "period" = periodDownsampled)
length(rawdata$torque)
rawdata$period[length(rawdata$period))
rawdata$period[length(rawdata$period)]
# create the vectors in which to save the downsampled data
timeDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$time)/binsize))
a_posDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$a_pos)/binsize))
torqueDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$torque)/binsize))
periodDownsampled <- vector(mode = "numeric", length = ceiling(length(rawdata$period)/binsize))
# downsampling time
for (index in seq(1,length(rawdata$time),binsize)) {
if(index < (length(rawdata$time)-binsize)) { # check whether we reached the end of the data; if not:
timeDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$time[index:(index+binsize-1)])/binsize)  # average all data in the bin and save it in the right slot of the downsampled vector
} else {  # in case we reached the end
timeDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$time[index:length(rawdata$time)])/length(rawdata$time[index:length(rawdata$time)])) # average over the remaining values and save the result
}
}
# downsampling position
for (index in seq(1,length(rawdata$a_pos),binsize)) {
if(index < (length(rawdata$a_pos)-binsize)) { # check whether we reached the end of the data; if not:
a_posDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$a_pos[index:(index+binsize-1)])/binsize)  # average all data in the bin and save it in the right slot of the downsampled vector
} else {  # in case we reached the end
a_posDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$a_pos[index:length(rawdata$a_pos)])/length(rawdata$a_pos[index:length(rawdata$a_pos)])) # average over the remaining values and save the result
}
}
# downsampling torque
for (index in seq(1,length(rawdata$torque),binsize)) {
if(index < (length(rawdata$torque)-binsize)) { # check whether we reached the end of the data; if not:
torqueDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$torque[index:(index+binsize-1)])/binsize)  # average all data in the bin and save it in the right slot of the downsampled vector
} else {  # in case we reached the end
torqueDownsampled[((index-1)/binsize)+1] <- round(sum(rawdata$torque[index:length(rawdata$torque)])/length(rawdata$torque[index:length(rawdata$torque)])) # average over the remaining values and save the result
}
}
# downsampling period
for (index in seq(1,length(rawdata$period),binsize)) {
if(index < (length(rawdata$period)-binsize)) { # check whether we reached the end of the data; if not:
if (abs(max(rawdata$period[index:(index+binsize-1)]) - min(rawdata$period[index:(index+binsize-1)])) == 0){ #check if there is a period switch in the bin, if there is:
periodDownsampled[((index-1)/binsize)+1] <- rawdata$period[index]
} else if (table(rawdata$period[index:(index+binsize-1)])[1]>table(rawdata$period[index:(index+binsize-1)])[2]) #if the majority of values indicates old period
{
periodDownsampled[((index-1)/binsize)+1] <- rawdata$period[index] #make the period vale that of the old period
} else {
periodDownsampled[((index-1)/binsize)+1] <- rawdata$period[index+binsize-1] #if the majority of values indicates new period, set the value to the new period
}
} else { # in case we reached the end
periodDownsampled[((index-1)/binsize)+1] <- rawdata$period[length(rawdata$period)]
}
}
# bind the downsampled vectors into one dataframe
rawdataDown <- data.frame("time" = timeDownsampled, "a_pos" = a_posDownsampled, "torque" = torqueDownsampled, "period" = periodDownsampled)
View(rawdataDown)
table(rawdata$period)
table(rawdataDown$period)
timeownsampled <- timeDownsampled-timeDownsampled[1]
timeDownsampled <- timeDownsampled-timeDownsampled[1]
rawdataDown <- data.frame("time" = timeDownsampled, "a_pos" = a_posDownsampled, "torque" = torqueDownsampled, "period" = periodDownsampled)
View(rawdataDown)
rawdata$diff <- diff(rawdata$time, 1, 1)
difference <- diff(rawdata$time, 1, 1)
view(difference)
View(difference)
plot(difference)
ggplot(difference)
library(ggplot2)
ggplot(difference)
ggplot(as.data.frame(difference))
lines(difference)
lines(difference)#
lines(difference)#
lines(difference)
plot.new#
plot.new
lines(difference)
plot(difference)
View(rawdata)
real_sample_rate
range=vector(min=sapply(rawdata$torque,min),max=sapply(rawdata$torque,max))
range=data.frame(min=sapply(rawdata$torque,min),max=sapply(rawdata$torque,max))
View(range)
rawdata$torque,min
setwd("B:/GitHub/DTSevaluations")
source('B:/GitHub/DTSevaluations/HTML_DTS_project.R', echo=TRUE)
setwd("B:/GitHub/DTSevaluations")
source('B:/GitHub/DTSevaluations/HTML_DTS_project.R', echo=TRUE)
View(pooled.data)
View(pooled.data)
knitr::opts_chunk$set(echo = TRUE)
exp_groups <- as.data.frame(t(plyr::ldply(exp_groups, rbind)))
View(exp_groups)
exp_groups <- list()
exp_groups[[x]] <- c(grp_title, grp_description, xml_list)
View(exp_groups)
plot(exp_groups)
print(exp_groups)
exp_groups <- as.data.frame(t(plyr::ldply(exp_groups, rbind)))
View(exp_groups)
unlist(exp_groups[1,])
colnames(exp_groups) = exp_groups[1, ]
exp_groups = exp_groups[-1,]
colnames(exp_groups) = exp_groups[1, ]
colnames(exp_groups) = exp_groups[1,]
exp_groups <- list()
exp_groups[[x]] <- c(grp_title, grp_description, xml_list)
View(exp_groups)
exp_groups <- as.data.frame(t(plyr::ldply(exp_groups, rbind)))
View(exp_groups)
colnames(exp_groups) = exp_groups[1, ]
View(exp_groups)
backup<-exp_groups
View(backup)
exp_groups = exp_groups[-1, ]
exp_groups<-backup
View(exp_groups)
View(exp_groups)
exp_groups = exp_groups[-2, ]
exp_groups<-backup
exp_groups = exp_groups[-7, ]
exp_groups<-backup
print(exp_groups)
exp_groups = exp_groups[-1, ]
print(exp_groups)
exp_groups<-backup
typeof(exp_groups)
exp_groups <- list()
exp_groups[[x]] <- c(grp_title, grp_description, xml_list)
typeof(exp_groups)
exp_groups <- as.data.frame(t(plyr::ldply(exp_groups, rbind)))
typeof(exp_groups)
exp_groups <- as.data.frame(t(plyr::ldply(exp_groups, rbind))) #make dataframe from list
typeof(exp_groups)
exp_groups <- list()
exp_groups[[x]] <- c(grp_title, grp_description, xml_list)
do.call(rbind.data.frame, exp_groups)
exp_groups<-do.call(rbind.data.frame, exp_groups)
typeof(exp_groups)
View(exp_groups)
typeof(backup)
exp_groups<-backup
as.data.frame(exp_groups)
exp_groups<-as.data.frame(exp_groups)
typeof(backup)
typeof(exp_groups)
View(exp_groups)
class(exp_groups)
View(exp_groups)
rownames(exp_groups) <- NULL
View(exp_groups)
kable(exp_groups)
class(exp_groups)
exp_groups <- exp_groups[-1, ]
class(exp_groups)
print(exp_groups)
kable(exp_groups)
as.data.frame(exp_groups)
exp_groups<-backup
kable(exp_groups)
exp_groups$test = c(1,2,3,4,5,6)
exp_groups$test = c(7,6,5,4,3,2,12)
kable(exp_groups)
exp_groups <- exp_groups[-1, ]
kable(exp_groups)
exp_groups = exp_groups[-1, drop=F]
kable(exp_groups)
exp_groups<-backup
exp_groups = exp_groups[-1, ,drop=F]
kable(exp_groups)
rownames(exp_groups) <- NULL
kable(exp_groups)
View(PIprofile)
View(sequence)
setwd("B:/GitHub/DTSevaluations")
source('B:/GitHub/DTSevaluations/HTML_DTS_project.R', echo=TRUE)
View(exp_groups)
View(PIprofile)
View(grouped.PIprofiles)
grouped.PIprofiles[[x]] = PIprofile
setwd("B:/GitHub/DTSevaluations")
source('B:/GitHub/DTSevaluations/HTML_DTS_project.R', echo=TRUE)
